[
  { "name": "event_id",       "type": "STRING",   "mode": "REQUIRED" },
  { "name": "topic",          "type": "STRING",   "mode": "REQUIRED" },
  { "name": "occurred_at",    "type": "TIMESTAMP","mode": "REQUIRED" },
  { "name": "published_at",   "type": "TIMESTAMP","mode": "REQUIRED" },

  { "name": "patient_ref",    "type": "STRING",   "mode": "NULLABLE" },
  { "name": "encounter_ref",  "type": "STRING",   "mode": "NULLABLE" },
  { "name": "visit_number",   "type": "STRING",   "mode": "NULLABLE" },
  { "name": "facility",       "type": "STRING",   "mode": "NULLABLE" },
  { "name": "department",     "type": "STRING",   "mode": "NULLABLE" },
  { "name": "bed_ref",        "type": "STRING",   "mode": "NULLABLE" },

  { "name": "correlation_id", "type": "STRING",   "mode": "NULLABLE" },
  { "name": "sequence",       "type": "INTEGER",  "mode": "NULLABLE" },

  { "name": "resource_type",  "type": "STRING",   "mode": "REQUIRED" },
  { "name": "resource_id",    "type": "STRING",   "mode": "NULLABLE" },
  { "name": "resource",       "type": "STRING",   "mode": "REQUIRED", "description": "FHIR JSON string" },
  { "name": "content_schema", "type": "STRING",   "mode": "NULLABLE" },

  {
    "name": "provenance",
    "type": "RECORD",
    "mode": "REQUIRED",
    "fields": [
      { "name": "source_system", "type": "STRING", "mode": "REQUIRED" },
      { "name": "logic_id",      "type": "STRING", "mode": "REQUIRED" },
      { "name": "inputs_span",   "type": "STRING", "mode": "REQUIRED" },
      { "name": "trace",         "type": "STRING", "mode": "NULLABLE" }
    ]
  }
]
